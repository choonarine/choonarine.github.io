---
import Layout from '../../layouts/Layout.astro';
import PostItem from '../../components/blog/PostItem.astro';
import { getCollection } from 'astro:content';

// blog 컬렉션 불러오기
const posts = await getCollection('blog');

// pubDate 기준 정렬
const sortedPosts = posts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Blog">
  <h1>Blog</h1>
  <ul>
    {sortedPosts.map(post => <PostItem post={post} />)}
  </ul>
</Layout>